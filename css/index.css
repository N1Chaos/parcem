/* ========================= */
/* VARIABLES CSS GLOBALES    */
/* ========================= */
:root {
  --primary-color: #4caf50;
  --secondary-color: #ff4c4c;
  --highlight-color: #2196f3;
  --mid-color: #ffeb3b;
  --background-color: #f8f9fa;
  --button-color: #94a595;
  --button-hover-color: #1e88e5;
  --map-timeline-hover-color: #ff5722;
  --font-color: #333;
  --border-radius: 10px;
  --padding: 10px;
  --font-size: 16px;
  --heading-font: 'Poppins', sans-serif;
  --body-font: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

/* ========================= */
/* TYPOGRAPHIE & BODY        */
/* ========================= */
body {
  font-family: var(--body-font);
  background-color: var(--background-color);
  color: var(--font-color);
  overflow-y: auto;
}

h1, h3, h5 {
  font-family: var(--heading-font);
  color: var(--font-color);
}

/* ========================= */
/* HEADER                     */
/* ========================= */
header {
  background: linear-gradient(135deg, #42a5f5, #2196f3, #1976d2);
  color: white;
  padding: 1.5rem 0;
  margin-bottom: 1.5rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  border-radius: var(--border-radius);
}

h1 {
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  color: #ffffff;
  text-transform: uppercase;
  text-shadow: 0 0 12px rgba(33,150,243,0.9),0 0 20px rgba(33,150,243,0.6);
  transition: transform 0.3s ease, text-shadow 0.3s ease;
}

h1:hover {
  transform: scale(1.05);
  text-shadow: 0 0 16px rgba(33,150,243,1),0 0 24px rgba(33,150,243,0.8);
}

header p {
  font-size: 1.2rem;
  margin: 0;
  color: #e1f5fe;
  text-shadow: 0 0 5px rgba(33,150,243,0.4);
}

/* ========================= */
/* CARTES                     */
/* ========================= */
.card {
  border-radius: var(--border-radius);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  height: 100%;
  animation: pulse 0.5s ease-in-out;
}

.card-title {
  font-family: var(--heading-font);
  font-size: 1.8rem;
  font-weight: 600;
  color: var(--button-color);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 1rem;
  position: relative;
  padding-bottom: 0.3rem;
  transition: transform 0.3s ease, color 0.3s ease;
}

.card-title::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 40px;
  height: 3px;
  background: var(--button-color);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.card-title:hover {
  transform: translateY(-2px);
  color: #5f6b61;
}

.card-title:hover::after {
  width: 100%;
}

/* ========================= */
/* BOUTONS                    */
/* ========================= */
.btn-primary, .btn-outline-primary, .btn-outline-danger, .btn-danger, #recordButton, #downloadButton, #search-button {
  font-family: var(--body-font);
  transition: background-color 0.3s ease, transform 0.2s ease-in-out, box-shadow 0.2s ease;
}

.btn-primary {
  background-color: var(--button-color);
  border: 5px solid var(--highlight-color);
  color: #fff;
  font-size: var(--font-size);
  border-radius: var(--border-radius);
  padding: 8px 16px;
  cursor: pointer;
}

.btn-primary:hover {
  background-color: var(--button-hover-color);
  transform: scale(1.05);
  box-shadow: 0 6px 12px rgba(33,150,243,0.4);
}

.btn-primary:active { transform: scale(0.95); }

.btn-outline-primary {
  background-color: var(--button-color);
  color: white;
  border: none;
  border-radius: 5px;
  padding: 8px 15px;
  margin: 5px 10px;
  width: calc(100% - 20px);
}

.btn-outline-primary:hover {
  background-color: var(--button-hover-color);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(33,150,243,0.4);
}

.btn-outline-primary:active { transform: scale(0.95); }

.btn-outline-danger {
  background-color: var(--secondary-color);
  color: white;
  border: none;
  position: absolute;
  bottom: 10px;
}

.btn-outline-danger:hover {
  background-color: #ff3333;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(33,150,243,0.4);
}

.btn-outline-danger:active { transform: scale(0.95); }

.btn-danger {
  background-color: #ff3333;
  border-color: #ff3333;
  width: auto;
}

.btn-danger:hover {
  background-color: #fd3c3c;
  border-color: #fd3c3c;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(253,60,60,0.4);
}

.btn-danger:active { transform: scale(0.95); }

/* ========================= */
/* NAVIGATION GAUCHE           */
/* ========================= */
.bg-light {
  background-color: white;
  border: 5px solid var(--secondary-color);
  border-radius: var(--border-radius);
}

.section-title {
  margin: 10px 0 5px;
  padding: 5px 10px;
  background-color: #f8f9fa;
  border-left: 4px solid var(--button-color);
  border-radius: 4px;
  animation: slideIn 0.3s ease-in-out;
}

.section-title h4 {
  font-family: var(--heading-font);
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--button-color);
  margin: 0;
  position: relative;
  padding-bottom: 0.2rem;
  transition: color 0.3s ease;
}

.section-title h4::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 30px;
  height: 2px;
  background: var(--button-color);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.section-title h4:hover {
  color: #5f6b61;
}

.section-title h4:hover::after {
  width: 100%;
}

/* ========================= */
/* AUDIO PLAYER               */
/* ========================= */
.audio-player-wrapper { position: relative; }

.audio-player-container {
  border-radius: var(--border-radius);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  background: #ffffff;
  border: 5px solid var(--button-color);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Cache complètement la zone "info fichier" tant qu’aucun fichier n’est chargé */
#audioFileInfo {
  display: none !important;           /* caché par défaut */
  opacity: 0;
  transition: opacity 0.4s ease;
}

#audioFileInfo:not(.opacity-0) {
  display: flex !important;            /* réapparaît dès que la classe opacity-0 est retirée */
  opacity: 1 !important;
}

/* === CONTROLES ET VISUALISATIONS === */
.audio-controls,
.visualizations {
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  transition: opacity 0.5s ease, max-height 0.5s ease;
  margin-top: 10px;
  pointer-events: none; /* important pour éviter les clics fantômes */
  margin-bottom: 0 !important;
  padding-bottom: 0.5rem !important;
}

.audio-controls.active,
.visualizations.active {
  opacity: 1;
  max-height: none;        /* un peu plus grand pour être tranquille */
  pointer-events: auto;
}

.control-group { margin-bottom: 1rem; }

.equalizer-controls { display: flex; gap: 10px; }

.equalizer-controls label {
  display: block;
  margin-bottom: 0.5rem;
  font-size: 0.85rem;
}

.form-control { font-family: var(--body-font); font-size: var(--font-size); border-radius: 5px; }

.form-range { width: 100%; height: 8px; border-radius: 5px; background: #e0e0e0; appearance: none; }

#eqLow.form-range { background: var(--secondary-color); }
#eqMid.form-range { background: var(--mid-color); }
#eqHigh.form-range { background: var(--highlight-color); }

#eqLow.form-range::-webkit-slider-thumb,
#eqMid.form-range::-webkit-slider-thumb,
#eqHigh.form-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px; border-radius: 50%; border: 2px solid #fff;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2); cursor: pointer;
}

#eqLow.form-range::-webkit-slider-thumb { background: var(--secondary-color); }
#eqMid.form-range::-webkit-slider-thumb { background: var(--mid-color); }
#eqHigh.form-range::-webkit-slider-thumb { background: var(--highlight-color); }

/* ========================= */
/* VISUALISATIONS             */
/* ========================= */
.visualization-canvas { width: 100%; height: 80px; border-radius: var(--border-radius); background-color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 1rem; }
.visualization-canvas.spectrum { height: 100px; }
.vu-meters, .waveforms { display: flex; flex-direction: row; gap: 20px; margin-bottom: 1rem; }
.vu-meter-container, .waveform-container { flex: 1; display: flex; flex-direction: column; }
.vu-meter-container label, .waveform-container label { font-size: 12px; color: var(--font-color); margin-bottom: 0.25rem; text-align: center; }
.vu-meter-container canvas, .waveform-container canvas { width: 100%; border: 1px solid #555; }


/* ====================== */
/* VU-MÈTRES & FORMES D’ONDE – TAILLE PARFAITE, COMPACTE & SANS ESPACE INUTILE */
/* ====================== */

#vuMeterLeftCanvas,
#vuMeterRightCanvas,
#waveformLeftCanvas,
#waveformRightCanvas {
  height: 150px !important;          /* ← taille idéale : bien visible mais pas trop grand */
  min-height: 150px !important;
  width: 100% !important;
  background-color: white !important;
  border: 1px solid #ddd !important;
  border-radius: var(--border-radius) !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
}

/* Conteneurs parfaitement ajustés → plus aucun espace blanc en trop */
.vu-meter-container,
.waveform-container {
  height: 170px !important;          /* juste ce qu’il faut pour le canvas + label */
  margin-bottom: 0.4rem !important;    /* espace réduit entre les blocs */
  padding: 0 !important;
}

/* Labels plus compacts et bien centrés */
.vu-meter-container label,
.waveform-container label {
  font-size: 0.95rem !important;
  font-weight: 600 !important;
  margin-bottom: 0.4rem !important;
  color: #444 !important;
}

/* ========================= */
/* MOTS SÉLECTIONNÉS          */
/* ========================= */
#selectedWordsDisplay { display: flex; flex-direction: column; gap: 5px; padding: 5px; flex-grow: 1; font-size: var(--font-size); max-height: 300px; overflow-y: auto; padding-right: 0.5rem; padding-bottom: 3rem; margin-bottom: 1rem; }
#selectedWordsDisplay::-webkit-scrollbar { width: 6px; }
#selectedWordsDisplay::-webkit-scrollbar-thumb { background-color: rgba(0,0,0,0.2); border-radius: 3px; }
.word-container { display: flex; justify-content: space-between; align-items: center; gap: 10px; opacity: 1; transition: opacity 0.3s ease; font-weight: bold; }
.word-container.removed { opacity: 0; }
.delete-icon { cursor: pointer; color: red; font-size: 20px; }

/* ========================= */
/* ANIMATIONS                 */
/* ========================= */
@keyframes pulse { 0%{transform:scale(0.95);}50%{transform:scale(1.02);}100%{transform:scale(1);} }
@keyframes slideIn { 0%{transform:translateY(20px);opacity:0;}100%{transform:translateY(0);opacity:1;} }
@keyframes blink { 0%,100%{opacity:1;}50%{opacity:0;} }
@keyframes fadeInOut {0%{opacity:0;}10%,90%{opacity:1;}100%{opacity:0;}}

/* ========================= */
/* RESPONSIVE                 */
/* ========================= */
@media (orientation: portrait) and (max-width:768px){ #landscapeNotice{display:block;position:fixed;top:0;left:0;right:0;z-index:9999;} body{padding-top:60px;} }
@media (max-width:768px){ h1{font-size:2.5rem;} header p{font-size:1rem;} .container{padding:15px;} .btn-mobile-full{width:100%;} #selectedWordsDisplay,.nav-col,.section-title{animation:slideIn 0.3s ease-in-out;} }
@media (max-width:576px){ .container{padding:0 20px;} .section-title h4{font-size:1.2rem;} }

/* ========================= */
/* ACCESSIBILITÉ              */
/* ========================= */
@media (prefers-reduced-motion: reduce){
  .recording-indicator,.recording-confirmation,.card,#selectedWordsDisplay,.nav-col,#friseChronoModal .modal-body,.section-title,.audio-controls{animation:none;transition:none;opacity:1;}
  .btn-outline-primary,.btn-primary,.btn-outline-danger,.btn-danger,h1,.card-title,#recordButton,#downloadButton,#search-button,.btn-outline-primary[data-bs-target="#carteMondeModal"],.btn-outline-primary[data-bs-target="#friseChronoModal"]{transition:none;transform:none;}
}

/* ========================= */
/* SPECTRUM & SPECTROGRAMME   */
/* ========================= */
#spectrumCanvas, #spectrogramCanvas{width:100%!important;height:180px!important;border-radius:var(--border-radius);margin-bottom:1rem;display:block;}
#spectrumCanvas{background:white!important;border:1px solid #ddd;box-shadow:0 4px 12px rgba(0,0,0,0.08);}
#spectrogramCanvas{background:black!important;border:1px solid #222;box-shadow:0 4px 16px rgba(0,0,0,0.5);image-rendering:pixelated;}
.freq-labels,.time-labels{position:absolute;pointer-events:none;font-family:'Consolas','Courier New',monospace;font-size:11px;color:rgba(255,255,255,0.7);text-shadow:0 0 4px black;}
.freq-labels{left:8px;top:0;}
.time-labels{bottom:-20px;left:0;width:100%;text-align:center;}
#spectrumCanvas~div,#spectrogramCanvas~div{pointer-events:none;}


/* CONTROLES TOUJOURS VISIBLES + jamais de fade-out */
.plyr--audio .plyr__controls{
  background:rgba(0,0,0,0.85)!important;
  border-radius:var(--border-radius);
  padding:0 10px!important;
  height:56px!important;
  opacity:1!important;                /* toujours visible */
  transform:translateY(0)!important;  /* empêche le déplacement vers le bas */
  transition:none!important;          /* désactive toutes les animations de hide/show */
}

/* Même quand Plyr ajoute la classe .plyr--hide-controls → on force l’affichage */
.plyr--audio.plyr--hide-controls .plyr__controls{
  opacity:1!important;
  transform:translateY(0)!important;
}

.plyr--audio .plyr__control{color:white!important;padding:10px!important;}
.plyr--audio .plyr__progress__buffer{background:rgba(255,255,255,0.2)!important;}
.plyr--audio input[type=range]{height:6px!important;}
.plyr,.plyr__controls{box-shadow:none!important;}

/* On garde le fond qui réagit au survol si tu veux, sinon tu peux virer cette ligne */
.plyr__controls,.plyr{transition:none;}   /* plus aucune transition */

/* MOBILE OPTIMIZATIONS */
@media (max-width: 768px) {
  #plyr-container {
    transform: none !important;
    margin-bottom: 0 !important;
  }

  .plyr--audio,
  .plyr--audio .plyr__video-wrapper,
  .plyr--audio video,
  .plyr--audio .plyr__controls {
    height: auto !important;
    min-height: 56px !important;
  }
}


/* Cadres colorés harmonisés selon ton thème */
.card.bg-secondary-light {
  border: 5px solid var(--secondary-color); /* couleur et épaisseur du cadre */
}

#commentCard {
  border: 5px solid var(--highlight-color); /* Bordure bleue */
  border-radius: 8px;      /* Angle arrondi optionnel */
}

/* Cadre orange → seulement pour l’enregistrement audio */
.audio-card {
  border: 5px solid #ff9800 !important;
}

/* Cadre gris/vert identique au lecteur audio principal */
.audio-player-container,
.card.audio-player-card { 
  border: 5px solid var(--button-color);  /* ← c’est ÇA que tu veux : gris/vert */
}


/* === MOTS SÉLECTIONNÉS DANS LES RUBRIQUES (index.html) === */
.selected-words-container .tag {
  background-color: #e9ecefe1 !important;   /* fond gris clair */
  color: #212529 !important;
  padding: 4px 10px !important;
  border-radius: 20px !important;         /* coins bien arrondis */
  font-size: 0.9rem !important;
  font-weight: 700 !important;   /* gras franc et net */
  display: inline-flex !important;
  align-items: center !important;
  gap: 6px !important;
  margin: 3px !important;
  box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important;
}

/* Croix de suppression en rouge + main au survol */
.selected-words-container .delete-word {
  color: #dc3545 !important;              /* rouge Bootstrap danger */
  font-weight: bold !important;
  font-size: 1.1em !important;
  cursor: pointer !important;             /* petite main */
  transition: color 0.2s !important;
}

.selected-words-container .delete-word:hover {
  color: #c82333 !important;              /* rouge plus foncé au hover */
}

/* Fond gris très léger quand aucun mot n’est sélectionné dans une rubrique */
.selected-words-container {
  min-height: 38px;                    /* évite que ça saute quand ça passe de vide → rempli */
  background-color: #f8f9fa;           /* gris très clair (même que ton thème) */
  border-radius: 8px;                  /* coins légèrement arrondis */
  padding: 6px 10px;                   /* un peu d’air */
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
  transition: background-color 0.3s ease;
}

/* Quand il y a au moins un mot → on garde le même fond (ou on peut le rendre blanc si tu veux) */
.selected-words-container:not(:empty) {
  background-color: #f1f3f5;           /* un poil plus foncé quand y’a du contenu */
}

/* Texte "Aucun mot sélectionné" un peu plus discret */
.selected-words-container .empty {
  color: #6c757d;
  font-style: italic;
  font-size: 0.9rem;
}

/* Couleur orange au survol des boutons Carte du monde et Frise */
.btn-outline-primary[data-bs-toggle="modal"]:hover {
  background-color: #ff9800 !important;
  border-color: #ff9800 !important;
  color: white !important;
}

#commentEditor:empty::before {
  content: "Écrivez votre commentaire (gras = Ctrl+B, italique = Ctrl+I)";
  color: #888;
  font-style: italic;
}
#commentEditor:focus { outline: none; }

/* Bouton Enregistrer → passe en rouge identique au site dès qu’on clique dessus */


#recordButton {
  background-color: #ff9800 !important;
  border-color: #ff9800 !important;
  color: white !important;
  transition: all 0.25s ease !important;
}

/* Rouge quand le bouton affiche "Arrêter l’enregistrement" */
#recordButton:not(:empty):has(i.bi-stop-fill) {
  background-color: #ff4c4c !important;
  border-color: #ff4c4c !important;
  box-shadow: 0 0 0 0.25rem rgba(255, 76, 76, 0.4) !important;
}

/* Bouton TÉLÉCHARGER */
#downloadButton {
  background-color: var(--highlight-color);  
  border-color: var(--highlight-color);
  color: white;
}

#downloadButton:hover {
  background-color: #2195f3e0;   
  border-color: #2195f3e0;
}

/* 2. Garde les 4 visualisations TOUJOURS présentes, même sans fichier */
#spectrumCanvas,
#spectrogramCanvas,
#vuMeterLeftCanvas,
#vuMeterRightCanvas,
#waveformLeftCanvas,
#waveformRightCanvas,
.visualizations {
  display: block !important;           /* jamais cachées */
}



/* Style pour l'égaliseur et balance */
.equalizer-controls .flex-fill {
  padding: 10px 0;
}

/* Style commun pour tous les sliders */
.equalizer-controls input[type="range"],
#balanceControl {
  height: 8px;
  cursor: pointer;
}

.equalizer-controls input[type="range"]::-webkit-slider-thumb,
#balanceControl::-webkit-slider-thumb {
  width: 20px;
  height: 20px;
  border: 2px solid white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  transition: all 0.2s;
}

.equalizer-controls input[type="range"]::-webkit-slider-thumb:hover,
#balanceControl::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 3px 6px rgba(0,0,0,0.15);
}

/* Couleurs différentes pour chaque bande EQ */
#eqLow::-webkit-slider-thumb { background: #dc3545; }
#eqMid::-webkit-slider-thumb { background: #ffc107; }
#eqHigh::-webkit-slider-thumb { background: #198754; }

/* Style spécifique pour la balance - HORIZONTALE */
#balanceControl {
  margin: 10px 0;
  background: linear-gradient(to right, #0d6efd, #ffffff 50%, #0d6efd);
  border-radius: 4px;
}

#balanceControl::-webkit-slider-thumb {
  background: #6f42c1;
}

/* Pour Firefox */
.equalizer-controls input[type="range"]::-moz-range-thumb,
#balanceControl::-moz-range-thumb {
  width: 20px;
  height: 20px;
  border: 2px solid white;
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#eqLow::-moz-range-thumb { background: #dc3545; }
#eqMid::-moz-range-thumb { background: #ffc107; }
#eqHigh::-moz-range-thumb { background: #198754; }
#balanceControl::-moz-range-thumb { background: #6f42c1; }

#balanceControl::-moz-range-track {
  background: linear-gradient(to right, #0d6efd, #ffffff 50%, #0d6efd);
}

/* Responsive */
@media (max-width: 768px) {
  .equalizer-controls {
    flex-direction: column;
    gap: 15px !important;
  }
  
  .equalizer-controls .flex-fill {
    padding: 8px 0;
  }
}




/* ========================= */
/* FIN DU CSS                */
/* ========================= */
